(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{6808:(e,r,a)=>{Promise.resolve().then(a.bind(a,9943))},7964:(e,r,a)=>{"use strict";a.d(r,{FavoriteIcon:()=>s});var t=a(5155),i=a(2115);let s=e=>{let{isFavorite:r}=e,[a,s]=(0,i.useState)(!1);return(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"40",height:"37",fill:"none",viewBox:"0 0 40 37",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:r||a?(0,t.jsx)("path",{fill:"#F24E1E",d:"m20 36.7-2.9-2.64C6.8 24.72 0 18.56 0 11 0 4.84 4.84 0 11 0c3.48 0 6.82 1.62 9 4.18C22.18 1.62 25.52 0 29 0c6.16 0 11 4.84 11 11 0 7.56-6.8 13.72-17.1 23.08z"}):(0,t.jsx)("path",{fill:"#F24E1E",d:"M29 0c-3.48 0-6.82 1.62-9 4.18C17.82 1.62 14.48 0 11 0 4.84 0 0 4.84 0 11c0 7.56 6.8 13.72 17.1 23.08L20 36.7l2.9-2.64C33.2 24.72 40 18.56 40 11c0-6.16-4.84-11-11-11m-8.8 31.1-.2.2-.2-.2C10.28 22.48 4 16.78 4 11c0-4 3-7 7-7 3.08 0 6.08 1.98 7.14 4.72h3.74C22.92 5.98 25.92 4 29 4c4 0 7 3 7 7 0 5.78-6.28 11.48-15.8 20.1"})})}},1168:(e,r,a)=>{"use strict";a.d(r,{Header:()=>o});var t=a(5155),i=a(8173),s=a.n(i),n=a(6046),c=a(5469),l=a.n(c);let o=()=>{let e=(0,n.usePathname)();return(0,t.jsx)("header",{className:l().header,children:(0,t.jsxs)("nav",{className:l().nav,children:[(0,t.jsx)(s(),{href:"/",className:"".concat(l().link," ").concat("/"===e?l().active:""),children:"Все котики"}),(0,t.jsx)(s(),{href:"/favorites",className:"".concat(l().link," ").concat("/favorites"===e?l().active:""),children:"Любимые котики"})]})})}},8120:(e,r,a)=>{"use strict";a.d(r,{InfiniteScroll:()=>c});var t=a(5155),i=a(2115),s=a(3461),n=a.n(s);let c=e=>{let{onLoadMore:r,isLoading:a,hasMore:s=!0,children:c}=e,l=(0,i.useRef)(null),o=(0,i.useRef)(null);return(0,i.useEffect)(()=>{if(a||!s)return;l.current||(l.current=new IntersectionObserver(e=>{let[a]=e;a.isIntersecting&&r()}));let e=l.current,t=o.current;return t&&e.observe(t),()=>{t&&e.unobserve(t)}},[a,s,r]),(0,t.jsxs)("div",{className:n().wrapper,children:[c,!a&&s&&(0,t.jsx)("div",{ref:o,className:n().trigger})]})}},9943:(e,r,a)=>{"use strict";a.d(r,{MainCatsGrid:()=>j});var t=a(5155),i=a(2115),s=a(2957),n=a.n(s),c=a(5565);let l=e=>{let{cat:r,action:a}=e;return(0,t.jsxs)("div",{className:n().card,children:[(0,t.jsx)(c.default,{className:n().image,src:r.url,alt:"Cat",width:225,height:225}),a&&(0,t.jsx)("div",{className:n().action,children:a})]})};var o=a(2103),d=a.n(o);let _=a(2651).A.create({baseURL:"https://api.thecatapi.com/v1",headers:{"x-api-key":"live_GtYlrbtDMeaMYkSSZy1dr5oDzKlMaXzYXDK6xCAp1v1Eg4jSc8GH7OmeONwKrLpB"}}),h=async function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;try{return(await _.get("/images/search",{params:{limit:r,page:e}})).data}catch(e){throw console.error("error while loading data:",e),Error("Error while loading cats data")}};var v=a(7964),u=a(8120);a(1168);var g=a(3961),f=a.n(g),m=a(9827),x=a(709);let p=(0,m.v)()((0,x.Zr)(e=>({favoriteCats:[],addFavorite:r=>e(e=>({favoriteCats:[...e.favoriteCats,r]})),removeFavorite:r=>e(e=>({favoriteCats:e.favoriteCats.filter(e=>e.id!==r)}))}),{name:"favorite-cats-storage"})),w=e=>{let{cat:r}=e,{favoriteCats:a,addFavorite:i,removeFavorite:s}=p(),n=a.some(e=>e.id===r.id);return(0,t.jsx)("button",{className:f().button,onClick:()=>{n?s(r.id):i(r)},children:(0,t.jsx)(v.FavoriteIcon,{isFavorite:n})})},j=()=>{let[e,r]=(0,i.useState)([]),[a,s]=(0,i.useState)(1),[n,c]=(0,i.useState)(!1),[o,_]=(0,i.useState)(!0),v=async()=>{if(!n&&o){c(!0);try{let e=await h(a,10);0===e.length?_(!1):(r(r=>[...r,...e]),s(e=>e+1))}catch(e){console.error("Error while loading cats:",e)}finally{c(!1)}}};return(0,t.jsxs)(u.InfiniteScroll,{onLoadMore:v,isLoading:n,hasMore:o,children:[(0,t.jsx)("div",{className:d().grid,children:e.map(e=>(0,t.jsx)(l,{cat:e,action:(0,t.jsx)(w,{cat:e})},e.id))}),n&&(0,t.jsx)("p",{className:d().loading,children:"...загружаем еще котиков..."}),!o&&(0,t.jsx)("p",{className:d().noMore,children:"больше котиков нет :("})]})}},2957:e=>{e.exports={card:"cat_card__v_y6z",image:"cat_image__SpwLO",action:"cat_action__uDRYk"}},3961:e=>{e.exports={button:"add-to-favorites_button__1_Air"}},5469:e=>{e.exports={header:"header_header__zi5tm",nav:"header_nav__RUrG6",link:"header_link__QLErb",active:"header_active__R_en2"}},3461:e=>{e.exports={wrapper:"infinite-scroll_wrapper__63QAs",trigger:"infinite-scroll_trigger__OZLzd",loading:"infinite-scroll_loading___ix0s",noMore:"infinite-scroll_noMore__YVqBD"}},2103:e=>{e.exports={grid:"main-cats-grid_grid__R5LrR",loading:"main-cats-grid_loading___tf_E",noMore:"main-cats-grid_noMore__b_wH4"}}},e=>{var r=r=>e(e.s=r);e.O(0,[664,28,721,441,517,358],()=>r(6808)),_N_E=e.O()}]);